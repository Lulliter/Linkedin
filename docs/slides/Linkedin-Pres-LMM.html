<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Presentation Linkedin data 4 competitive cities</title>
    <meta charset="utf-8" />
    <meta name="author" content="Luisa M. Mimmi" />
    <script src="libs/header-attrs/header-attrs.js"></script>
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <link href="libs/remark-css/rladies.css" rel="stylesheet" />
    <link href="libs/remark-css/rladies-fonts.css" rel="stylesheet" />
    <script src="libs/kePrint/kePrint.js"></script>
    <link href="libs/lightable/lightable.css" rel="stylesheet" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# Presentation Linkedin data 4 competitive cities
]
.subtitle[
## ⚔<br/>with xaringan
]
.author[
### Luisa M. Mimmi
]

---




class: inverse, center, middle



# OUTLINE

1. Conceptual Framework

1. Data exploration 

1. Further data exploration by city

1. Bivariate measures of association - categorical variables across cites

1. Zooming in on domestic migration

1. Relevant policy questions and potential follow-up

1. Reference
---

# Conceptual Framework

- A city's **productivity** can be simply defined as the net result of contrasting forces 
`$$\ Productivity = Agglomeration (positive) - Congestion (negative)$$` 

- Both `\(\ Agglomeration\)` and `\(\ Congestion\)` could be modelled as a function of various dimensions `\(\ = f(Skills, Amenities, Form, Access)\)`
- Dimensions
    + **Skills**, a city’s aggregate stock of human capital
    + **Amenities** - _attracting 'skills'_ - job opportunities, housing values, cultural attractions
    + **Form**, the size and spatial configuration of a city (*density* vs. *sprawl*, *wider metropolitan areas*)
    + **Access**, a city’s connectedness (or barriers) to other cities, both at home and abroad, through the transportation network


.footnote[
[1] This comparative analysis will focus on the first dimension **Skills**, but keeping in mind also the other key dimensions that can explain the competitiveness of a city
]

---

# Data Exploration 







## Metadata on the LinkedIn dataset

* Data contain *347 origin metro areas* and only *282 destinations*
* All Linkedin members (in data) have some tertiary education degree
* Linkedin members (in data) are distributed across *10 industry sectors* (plus 5 members with _unknown_ level)
  +  About 50% of them have an _Entry level_ job -&gt; likely, active members are also people who look for jobs
* Linkedin members (in data) are distributed across *14 industry sectors* 
  + Highest % in _Government/Education/Non-profit_, followed by _Technology - Software_,  _Healthcare &amp; Pharmaceutical_, and _Professional Services_
* Linkedin members (in data) are distributed across *26 job positions* 

---
#### Distribution of LinkedIn Members' _HIGHEST DEGREE_ across countries of origin - table
&lt;table class="table table-striped table-hover" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; both[, 7] &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; both[, 2] &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; n &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; freq &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; rel.freq &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Australia &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; associate &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 255 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0286452 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 2.86% &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Australia &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; bachelor &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 5632 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.6326668 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 63.27% &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Australia &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; doctor &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 611 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0686363 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 6.86% &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; Australia &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; master &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2404 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2700517 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 27.01% &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;color: white !important;background-color: #999999 !important;"&gt; United Kingdom &lt;/td&gt;
   &lt;td style="text-align:left;color: white !important;background-color: #999999 !important;"&gt; associate &lt;/td&gt;
   &lt;td style="text-align:right;color: white !important;background-color: #999999 !important;"&gt; 1312 &lt;/td&gt;
   &lt;td style="text-align:right;color: white !important;background-color: #999999 !important;"&gt; 0.0358323 &lt;/td&gt;
   &lt;td style="text-align:left;color: white !important;background-color: #999999 !important;"&gt; 3.58% &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;color: white !important;background-color: #999999 !important;"&gt; United Kingdom &lt;/td&gt;
   &lt;td style="text-align:left;color: white !important;background-color: #999999 !important;"&gt; bachelor &lt;/td&gt;
   &lt;td style="text-align:right;color: white !important;background-color: #999999 !important;"&gt; 22107 &lt;/td&gt;
   &lt;td style="text-align:right;color: white !important;background-color: #999999 !important;"&gt; 0.6037689 &lt;/td&gt;
   &lt;td style="text-align:left;color: white !important;background-color: #999999 !important;"&gt; 60.38% &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;color: white !important;background-color: #999999 !important;"&gt; United Kingdom &lt;/td&gt;
   &lt;td style="text-align:left;color: white !important;background-color: #999999 !important;"&gt; doctor &lt;/td&gt;
   &lt;td style="text-align:right;color: white !important;background-color: #999999 !important;"&gt; 3533 &lt;/td&gt;
   &lt;td style="text-align:right;color: white !important;background-color: #999999 !important;"&gt; 0.0964905 &lt;/td&gt;
   &lt;td style="text-align:left;color: white !important;background-color: #999999 !important;"&gt; 9.65% &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;color: white !important;background-color: #999999 !important;"&gt; United Kingdom &lt;/td&gt;
   &lt;td style="text-align:left;color: white !important;background-color: #999999 !important;"&gt; master &lt;/td&gt;
   &lt;td style="text-align:right;color: white !important;background-color: #999999 !important;"&gt; 9663 &lt;/td&gt;
   &lt;td style="text-align:right;color: white !important;background-color: #999999 !important;"&gt; 0.2639082 &lt;/td&gt;
   &lt;td style="text-align:left;color: white !important;background-color: #999999 !important;"&gt; 26.39% &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; United States &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; associate &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 79505 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.1849818 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 18.5% &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; United States &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; bachelor &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 225213 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.5239961 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 52.4% &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; United States &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; doctor &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 36358 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.0845930 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 8.46% &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; United States &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; master &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 88723 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 0.2064291 &lt;/td&gt;
   &lt;td style="text-align:left;"&gt; 20.64% &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
---
#### Distribution of LinkedIn Members' _HIGHEST DEGREE_ across countries of origin - Main findings

* The US has a significantly higher percentage of *_Associates_* migrants (18% vs 3% UK and 4% AUS)
    
    + **Question**: Is it due to a different education system in America? 
    
* Conversely, the proportions across country of _SENIORITY_ / _SECTOR_ / _POSITION_ appear remarkably similar across coountries
    
    + **Question**: Are this similarities due to a certain selection bias of the sample? Or, possibly mean that the three English speaking counties have homogenous job market and working populations?  
    

---
#### Top 10 _DESTINATION_ and _ORIGIN_ cities (mostly US)









&lt;img src="Linkedin-Pres-LMM_files/figure-html/unnamed-chunk-5-1.png" style="display: block; margin: auto;" /&gt;
* Understandably, these are mostly American cities, although London is # 5 Destination and # 10 Origin for migrants
* Interestingly, 9/10 of top _destinations_ are the same as top _origin_ cities
    + There may be high inter-city *mobility*, but not necessarily other dimensions (*Amenities*, *Access*) of competitiveness, such that people decide to stay
    + Or, it may just be the American way of moving to and from college!

---

#### What about the *NET  * migration flow to &amp; from Top 20 cities? 
&lt;img src="Linkedin-Pres-LMM_files/figure-html/unnamed-chunk-6-1.png" style="display: block; margin: auto;" /&gt;

* Overall, most of the top American destination cities maintain a strong positive net flow of migrants. 
* Chicago, Philadelphia and Miami had a negative net flow over 2016
  + Given Miami's position as a main entry port for Latin American migrants, this is a bit hard to believe. Possibly suggests non-representativity of Linkedin dataset for capturing the whole migrant population

---

#### Top 20 DESTINATION cities for migrants in UK 


&lt;img src="Linkedin-Pres-LMM_files/figure-html/top UK -1.png" style="display: block; margin: auto;" /&gt;
* Contrary to the USA's generalized high mobility across the whole country, in the UK, London is definitively an outlier
* This makes sense in light of London special role as European *hub*, at least for financial and other sectors 

---

#### Top 20 ORIGIN cities for migrants in UK 

&lt;img src="Linkedin-Pres-LMM_files/figure-html/unnamed-chunk-7-1.png" style="display: block; margin: auto;" /&gt;

* Yet, similar to the top US destination cities, London is also a place from which many people leave  
---

#### Net migrants flows in top 20 ORIGIN cities in UK 

&lt;img src="Linkedin-Pres-LMM_files/figure-html/unnamed-chunk-8-1.png" style="display: block; margin: auto;" /&gt;
* In 2016, London had a net positive flow of migrants (followed at a distance by Manchester), while the other British cities where mostly loosing citizens
  
---

#### Top 20 DESTINATION cities for migrants in AUSTRALIA 


&lt;img src="Linkedin-Pres-LMM_files/figure-html/top AUSTRALIA -1.png" style="display: block; margin: auto;" /&gt;

* Evidently the magnitude of migration flows is much smaller in Australia
  + While I don't have the population sizes for comparison, it would seem Australian LinkedIn members move less than their counter-parts
---

#### Top 20 ORIGIN cities for migrants in AUSTRALIA 

&lt;img src="Linkedin-Pres-LMM_files/figure-html/unnamed-chunk-9-1.png" style="display: block; margin: auto;" /&gt;
* In 2016, migrants were also leaving from most cities in great numbers
---

#### Net migration flows in top 20 ORIGIN cities in AUSTRALIA 

&lt;img src="Linkedin-Pres-LMM_files/figure-html/unnamed-chunk-10-1.png" style="display: block; margin: auto;" /&gt;
* The net flow figures, depicts a much more mixed situation than the UK. 
  + 2 other cities (beyond the capital), Brisbane and Canberra, have been quite attractive in 2016
  + Conversely, several cities (notably Perth and Adelaide) have lost a lot of workers in 2016 


---
# Further data exploration by city
### Bivariate measures of association 

Upon studying the migration patterns in general, I now want to check if there is any relation between destination/origin of migration and the other variables in the dataset. 

As an example, I select the top 3 cities of destination in the 3 countries:  

* Greater New York City Area
* San Francisco Bay Area
* Washington D.C. Metro Area
* Manchester, United Kingdom
* London, United Kingdom
* Birmingham, United Kingdom
* Sydney Area, Australia
* Brisbane Area, Australia
* Canberra Area, Australia



---
#### Distribution of HIGHEST DEGREE obtained across top 3 destination cities in 3 countries 





&lt;img src="Linkedin-Pres-LMM_files/figure-html/unnamed-chunk-13-1.png" style="display: block; margin: auto;" /&gt;

* San Francisco (followed by Canberra) seems to attract the highest amount of doctors: With Canberra receiving also the highest group of master holders 
* NY, San Francisco and Washington DC seem to receive many with "Associate" level: possibly young people looking for their first job
 
---
#### SECTOR distribution across top 3 destination cities in 3 countries 





&lt;img src="Linkedin-Pres-LMM_files/figure-html/unnamed-chunk-15-1.png" style="display: block; margin: auto;" /&gt;

---

#### Interesting correlation between the two variables *SECTOR* &amp; *city of destination* 


* Not surprisingly, the share of immigrants by sector seems to vary a lot in a way that is correlated to the city of destination
   + Extremely high number in Govv/ Educ/ Non Profit in _Canberra_ &amp; _Washington_
   + Extremely high number in Software + Hardware Technology in _San Francisco_
   + Extremely high number in Govv/ Educ/ Non Profit + Financial Services also in _NY_


* This intuitive fact (especially knowing how American cities's sector specialization), is also validated by calculating `Cramer's V`
    + (Pearson chi-square statistic rescaled to have values between [0-1])

`$$\ V = \sqrt \frac{X^2}{[nobs * (min(ncols, nrows) – 1)]}$$`

* The Cramer’s V statistic has the highest value for _Sector_ and _Destination Region_ = 0.1605205
---

# Zooming in on domestic migration




It would be interesting to see how this noticeable association (between sector and destination city) plays out when looking at domestic migration only.

Here are the findings per country:

1. USA:        `Cramer's V` =  0.1270301 
2. Australia:  `Cramer's V` =  0.1074171
3. UK:         `Cramer's V` =    0.07060599

In the next 3 slides, the same association is illustrated graphically

.footnote[
[1] For plotting simplicity, I used random sub-samples of cities for US and UK

]

---

#### Correlation between *sector* &amp; *city of destination* - USA domestic migration 
&lt;img src="Linkedin-Pres-LMM_files/figure-html/unnamed-chunk-17-1.png" style="display: block; margin: auto;" /&gt;
---

#### Correlation between *sector* &amp; *city of destination* - AUS domestic migration 

&lt;img src="Linkedin-Pres-LMM_files/figure-html/unnamed-chunk-18-1.png" style="display: block; margin: auto;" /&gt;
---

#### Correlation between *sector* &amp; *city of destination* - UK domestic migration 
&lt;img src="Linkedin-Pres-LMM_files/figure-html/unnamed-chunk-19-1.png" style="display: block; margin: auto;" /&gt;


---
# Relevant policy questions and potential follow-up

The data - describing certain characteristics of 2016 migrants from 3 countries - is limited to 1 year and there is likely some selection bias that challenges the representativity of this sample. The sample could be biased towards highly educated, (obviously) internet-savvy, and likely skewed towards a young-ish stratum of the actual working/migrant population.

Nonetheless, the analysis of this dataset offered some very interesting insights. Some of the findings are not surprising, but some raise some crucial questions that policymakers should carefully consider if they intend to foster the competitiveness of cities. 

To answer some of these questions, it would be extremely interesting to combine the Linkedin data with data from other sources that can make the information more complete and relevant. 

---

### Follow-up question # 1 and relevant external data sources

The most attractive cities have also lost many people over the past year. It would be advisable to combine the information about in-demand sectors and position with other **Amenities** that determine people's choices to relocate. It is plausible that _rent_ in NY, DC or San Francisco is a strong deterrent, particularly for workers in "noncutting-edge" sectors if their _salary_ is not growing at the same rate. 

DATA SOURCE: [glassdoor](https://www.glassdoor.com/Salaries/index.htm) could be an interesting source because it has granular and comparable data on salaries that can be analyzed by _SECTOR_, _POSITION_, _CITY_

---

### Follow-up question # 2 and relevant external data sources
Another important aspect for promoting cities' competitiveness is that they are actually not isolated entities, but rather _systems of cities_ in that a healthy level of mobility can foster the exchange of **Skills** (intended as the individual city's collective human capital). 

Clearly, the US shows a much higher and much more widespread mobility - at least in major towns all over the states. It could seem odd that in seemingly smaller countries the all mobility affect 2/3 top cities. My guess is that infrastructure and cultural factors are jointly at play.  

Not so long ago, the World Bank hosted a very stimulating conference on "Space and Productivity" and will soon hold its "2nd Geospatial Day": just a couple of examples of how crucial it is to design place-based policies that acknowledge the fundamental importance of the **Form** and **Access** explanatory dimensions of the city/cities productivity function. 

DATA SOURCES: the [Space &amp; Productivity](http://www.worldbank.org/en/events/2017/09/28/space-and-productivity-conference) conference and  [Geospatial Blog](https://blogs.worldbank.org/category/tags/geospatial-technology) are good places to start.
---


class: center, middle

# Thank You!


---

# Reference

* The conceptual framework is borrowed from a very interesting forthcoming report by some colleagues at the World Bank: 
   + Ferreyra M.M, Roberts M. Lozano Gracia N. Restrepo Cadavid M., Selod H,. 2017 (forthcoming). _Falling Short - Cities and Productivity in Latin America and the Caribbean_. World Bank Group. Washington D.C.

* The slides were created via the R package  [**xaringan**](https://github.com/yihui/xaringan) created by '*Presentation Ninja*' Yihui Xie


    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
